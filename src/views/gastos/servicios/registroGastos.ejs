<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../../partials/AdminLTEHead.ejs') %>
    <!-- <link rel="stylesheet" href="/css/formulario.css" /> -->
    <!-- <script src="/js/registroCliente.js"></script> -->
    <title>REDNOR - Registrar Servicio</title>
    <style>
     .flex-gap {
        padding: 1rem;
      }
    </style>
</head>

<body class="hold-transition sidebar-mini">
  <div class="wrapper">
    <!-- Navbar -->
    <%- include('../../partials/navbar.ejs') %>

    <!-- Main Sidebar -->
    <%- include('../../partials/mainSidebar.ejs') %>

    <!-- Control Sidebar -->
    <%- include('../../partials/controlSidebar.ejs') %>

    <!-- Main Content -->
    <main class="content-wrapper">
      <section class="content pt-3">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-8 m-auto">
              <div class="card">
                <div class="card-header">
                        <h3 class="card-title"><%= categoria.nombre %></h3>
                </div>
                <div class="card-body">
                  <form action="/gastos/<%= categoria.id %>/servicio/crear" method="post">

                    <h3 class="lead">Informacion del Servicio</h3>

                      <div class="form-group">
                        <label for="nombre">Nombre</label>
                        <input type="text" name="nombre" id="nombre" class="form-control" />
                      </div>

                      <div class="form-group">
                        <label for="descripcion">Descripcion</label>
                        <textarea name="descripcion" id="descripcion" rows="3" class="form-control" autocomplete="on"></textarea>
                      </div>

                      <h3 class="lead">Condiciones</h3>

                      <div class="form-group">
                        <label for="condiciones">Condiciones</label>
                        <textarea name="condiciones" id="condiciones" rows="3" class="form-control" autocomplete="on"></textarea>
                      </div>

                      <div class="form-group">
                        <label for="dia_vencimiento">Dia de Vencimiento</label>
                        <input type="text" name="dia_vencimiento" id="dia_vencimiento" class="form-control">
                        <!-- <input type="date" class="form-control" id="fecha_vencimiento"> -->
                      </div>

                      <div class="form-group">
                        <label for="frecuencia ">Frecuencia</label>
                        <select name="frecuencia" id="frecuencia" class="form-control">
                          <option value="Servicio único">Servicio único</option>
                          <option value="Servicio recurrente">Servicio recurrente</option>
                        </select>
                      </div>

                      <hr class="mt-3">
                      <h3 class="lead">Informacion del Pago</h3>

                      <div class="form-group">
                        <label for="forma_pago">Forma de Pago</label>
                        <select name="forma_pago" id="forma_pago" class="form-control">
                          <option value="" selected disabled hidden>Seleccione una opcion</option>
                          <% formas_pago.forEach(forma_pago => { %>
                           <option value="<%= forma_pago.id %>"><%= forma_pago.nombre %></option>
                          <% }) %>
                        </select>
                      </div>

                      <div class="form-group" id="entidad_bancaria" style="display: none;">
                        <label for="cbu">Entidad Bancaria</label>
                        <input type="text" class="form-control"> <!--  Longitud 22 caracteres exactos -->
                      </div>

                      <div class="form-group" id="cbu" style="display: none;">
                        <label for="cbu">CBU/CVU</label>
                        <input type="text" name="cbu" id="cbu" class="form-control"> <!--  Longitud 22 caracteres exactos -->
                      </div>

                      <div class="form-group" id="cuit" style="display: none;">
                        <label for="cuit">CUIT/CUIL (Sin guiones)</label>
                        <input type="text" name="cuit" id="cuit" class="form-control">
                      </div>

                      <div class="form-group">
                        <label for="email">Email (opcional)</label>
                        <input type="email" name="email" id="email" class="form-control" />
                      </div>

                      <div class="form-group">
                        <label for="telefono">Telefono (Whatsapp)</label>
                        <input type="tel" name="telefono" id="telefono" placeholder="+54 9 385X XX-XXXX" class="form-control">
                      </div>

                      <!-- <div class="form-group">
                        <label for="mensaje_correo">Mensaje Correo</label>
                        <textarea name="mensaje_correo" id="mensaje_correo" rows="3" placeholder="Se adjunta documentación relacionada al pago de %mes% correspondiente al servicio de %nombre% realizado a través de %operacion bancaria%" class="form-control"></textarea>
                      </div> -->

                      <!-- <div class="form-group">
                        <label for="Referencia">Referencia (opcional)</label>
                        <input type="text" class="form-control">
                      </div> -->

                      <div class="form-group">
                        <label for="tipo_divisa">Tipo de Divisa</label>
                        <select name="tipo_divisa" id="tipo_divisa" class="form-control">
                          <option value="">ARS</option>
                          <option value="">USD</option>
                        </select>
                      </div>

                      <div class="form-group">
                        <label for="monto">Monto</label>
                        <input type="number" step="0.01" name="monto" id="monto" class="form-control" />
                      </div>

                      <!-- <h3 class="lead">Alertas de Envios de Pagos</h3> -->
                      

                      <!-- <div class="form-group">
                        <label for="mensaje_opcional">Mensaje (opcional)</label>
                        <textarea name="mensaje_opcional" id="mensaje_opcional" rows="3" class="form-control" placeholder="Buen día, adjunto el %comprobante% de transferencia correspondiente al %mes%"></textarea>
                      </div> -->

                      <!-- Boton Enviar -->
                      <input type="submit" class="btn btn-block btn-primary" />

                      <!-- Boton Volver atras -->
                      <a href="/gastos/servicios/<%= categoria.id %>/detalle" class="btn btn-block btn-secondary mt-3">Volver Atrás...</a>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
  <!-- FIN CONTENIDO -->
    </main>
  </div>

  <%- include('../../partials/AdminLTEScripts.ejs') %>
    <!-- bs-custom-file-input -->
    <script src="/plugins/bs-custom-file-input/bs-custom-file-input.min.js"></script>
    <script>
      $(function () {
        bsCustomFileInput.init();
      });

      let formaPago = document.getElementById("forma_pago");

      formaPago.addEventListener("change", function () {
        if (this.value === "2") {
          document.getElementById("entidad_bancaria").style.display = "block";
          document.getElementById("cbu").style.display = "block";
          document.getElementById("cuit").style.display = "block"
        } else {
          document.getElementById("entidad_bancaria").style.display = "none";
          document.getElementById("cbu").style.display = "none";
          document.getElementById("cuit").style.display = "none";
        }
      })

    </script>
</body>

</html>