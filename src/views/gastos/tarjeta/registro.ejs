<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../../partials/AdminLTEHead.ejs') %>
  <script src="/js/cuit.js"></script>
  <script src="/js/registroGastos.js"></script>
  <title>Tarjeta VISA - Registro</title>
</head>

<body class="hold-transition sidebar-mini">
  <div class="wrapper">
    <!-- Navbar -->
    <%- include('../../partials/navbar.ejs') %>

    <!-- Main Sidebar -->
    <%- include('../../partials/mainSidebar.ejs') %>

    <!-- Control Sidebar -->
    <%- include('../../partials/controlSidebar.ejs') %>

    <!-- Main Content -->
    <main class="content-wrapper">
      <section class="content pt-3">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-8 m-auto">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">Tarjeta VISA</h3>
                </div>
                <div class="card-body">
                  <form action="#" method="post">
                    <div class="form-group">
                      <label for="nombre">Nombre</label>
                      <input type="text" name="nombre" id="nombre" class="form-control" />
                    </div>

                    <div class="form-group">
                      <label for="nro_tarjeta">Numero de Tarjeta</label>
                      <input type="nro_tarjeta" name="nro_tarjeta" id="nro_tarjeta" class="form-control">
                    </div>


                    <div class="form-group">
                      <label for="dia_vencimiento">Dia de Vencimiento</label>
                      <input type="text" name="dia_vencimiento" id="dia_vencimiento" class="form-control">
                    </div>

                    <div class="form-group">
                      <label for="frecuencia ">Frecuencia</label>
                      <select name="frecuencia" id="frecuencia" class="form-control" required>
                        <option value="" selected disabled> - Seleccione una opcion - </option>
                        <option value="Único">Único</option>
                        <option value="Recurrente">Recurrente</option>
                      </select>
                    </div>

                    <div class="form-group">
                      <label for="forma_pago">Forma de Pago</label>
                      <select name="forma_pago" id="forma_pago" class="form-control">
                        <option value="" selected disabled hidden>Seleccione una opcion</option>
                        <% formas_pago.forEach(forma_pago => { %>
                          <option value="<%= forma_pago.id %>"><%= forma_pago.nombre %></option>
                        <% }) %>
                      </select>
                    </div>

                    <div class="form-group" id="entidad_bancaria_div" style="display: none;">
                      <label for="entidad_bancaria">Entidad Bancaria</label>
                      <input type="text" name="entidad_bancaria" id="entidad_bancaria" class="form-control">
                    </div>

                    <div class="form-group" id="cbu_div" style="display: none;">
                      <label for="cbu">CBU/CVU</label>
                      <input type="text" name="cbu" id="cbu" class="form-control" maxlength="22"> <!--  Longitud 22 caracteres exactos -->
                    </div>

                    <div class="form-group" id="cuit_div" style="display: none;">
                      <label for="cuit">CUIT/CUIL</label>
                      <input type="text" name="cuit" id="cuit" class="form-control" maxlength="13">
                    </div>

                    <!-- Boton Enviar -->
                    <input type="submit" class="btn btn-block btn-primary" />

                    <!-- Boton Volver atras -->
                    <a href="#" class="btn btn-block btn-outline-secondary mt-3">Volver Atrás...</a>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
  <!-- FIN CONTENIDO -->
    </main>
  </div>

  <%- include('../../partials/AdminLTEScripts.ejs') %>
  <!-- bs-custom-file-input -->
  <script src="/plugins/bs-custom-file-input/bs-custom-file-input.min.js"></script>
  <script>
    $(function () {
      bsCustomFileInput.init();
    });
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let formaPago = document.getElementById("forma_pago");

      const entidadBancaria = document.getElementById("entidad_bancaria");
      const cbu = document.getElementById("cbu");
      const cuitDiv = document.getElementById("cuit");
  
      formaPago.addEventListener("change", function () {
        if (this.value === "2") {
          entidadBancaria.parentNode.style.display = "block";
          cbu.parentNode.style.display = "block";
          cuitDiv.parentNode.style.display = "block"
        } else {
          entidadBancaria.parentNode.style.display = "none";
          cbu.parentNode.style.display = "none";
          cuitDiv.parentNode.style.display = "none";
        }
      })

      const cuit = document.getElementById("cuit");

      cuit.addEventListener("input", (event) => {
        event.target.value = patternMatch({
          input: event.target.value,
          template: "xx-xxxxxxxx-x",
        })
      })
    })
  </script>
  <script>
    
  </script>


</body>

</html>